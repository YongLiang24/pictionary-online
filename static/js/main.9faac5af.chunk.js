(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(36)},27:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(19),s=a.n(c),o=(a(27),a(8)),i=a(9),u=a(11),l=a(10),h=a(12),m=a(6),v=a(5),p=function(e){return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:e.handleForm,name:"answer"},n.a.createElement("label",null,"Your Answer:",n.a.createElement("input",{type:"text",name:"answer",required:!0})),n.a.createElement("input",{type:"submit",value:"Send"})))},f=function(e){return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:e.handleForm,name:"guess"},n.a.createElement("label",null,"Send Guess:",n.a.createElement("input",{type:"text",name:"guess",required:!0})),n.a.createElement("input",{type:"submit",value:"Submit"})))},d=function(e){return n.a.createElement("div",null,n.a.createElement("div",{className:"homeCard"},n.a.createElement("h4",null,"Play as Guess"),n.a.createElement(m.b,{to:"/guess"},"Guess")),n.a.createElement("div",{className:"homeCard"},n.a.createElement("h4",null,"Play as Draw"),n.a.createElement(m.b,{to:"/draw"},"Draw")))},y={"Content-Type":"application/json",Accept:"application/json"},g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).intervalCanvasDraw=function(){fetch("https://pictionaries.herokuapp.com/canvas").then(function(e){return e.json()}).then(function(e){for(var t=0;t<e[0].currXArray.length;t++)a.state.ctx.beginPath(),a.state.ctx.moveTo(e[0].prevXArray[t],e[0].prevYArray[t]),a.state.ctx.lineTo(e[0].currXArray[t],e[0].currYArray[t]),a.state.ctx.strokeStyle=a.state.x,a.state.ctx.lineWidth=a.state.y,a.state.ctx.stroke(),a.state.ctx.closePath()})},a.handleMouseMoves=function(e,t){e.persist(),a.findxy(t,e)},a.sendDrawData=function(){var e={currentGameId:a.props.gameId,prevXArray:a.state.prevXArray,prevYArray:a.state.prevYArray,currXArray:a.state.currXArray,currYArray:a.state.currYArray};fetch("https://pictionaries.herokuapp.com/canvas/1",{method:"PATCH",headers:y,body:JSON.stringify(e)})},a.findxy=function(e,t){"down"==e?a.setState(function(e){return{prevX:e.currX,prevY:e.currY,currX:t.clientX-e.canvas.offsetLeft,currY:t.clientY-e.canvas.offsetTop,flag:!0,dot_flag:!0}},function(){a.state.dot_flag&&(a.state.ctx.beginPath(),a.state.ctx.fillStyle=a.state.x,a.state.ctx.fillRect(a.state.currX,a.state.currY,2,2),a.state.ctx.closePath(),a.setState({dot_flag:!1}))}):"up"==e?(a.setState({flag:!1}),a.sendDrawData()):"move"==e&&a.state.flag&&a.setState(function(e){return{prevX:e.currX,prevY:e.currY,currX:t.clientX-e.canvas.offsetLeft,currY:t.clientY-e.canvas.offsetTop}},function(){a.draw()})},a.draw=function(){a.state.ctx.beginPath(),a.state.ctx.moveTo(a.state.prevX,a.state.prevY),a.state.ctx.lineTo(a.state.currX,a.state.currY),a.state.ctx.strokeStyle=a.state.x,a.state.ctx.lineWidth=a.state.y,a.state.ctx.stroke(),a.state.ctx.closePath();var e=a.state.prevXArray.slice();e.push(a.state.prevX);var t=a.state.prevYArray.slice();t.push(a.state.prevY);var r=a.state.currXArray.slice();r.push(a.state.currX);var n=a.state.currYArray.slice();n.push(a.state.currY),a.setState({prevXArray:e,prevYArray:t,currXArray:r,currYArray:n})},a.handleClear=function(){fetch("https://pictionaries.herokuapp.com/canvas/1",{method:"PATCH",headers:y,body:JSON.stringify({prevX:1,isClear:"true"})}).then(function(e){return e.json()}).then(function(e){console.log("change currentGameId",e)}),setTimeout(window.location.reload(),2e3)},a.canvasRef=n.a.createRef(),a.state={canvas:!1,ctx:!1,drawingFlag:!1,prevX:0,currX:0,prevY:0,currY:0,prevXArray:[],prevYArray:[],currXArray:[],currYArray:[],dot_flag:!1,x:"black",y:2,width:400,height:400,emptyArray:[]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.canvasRef.current,a=t.getContext("2d");t.width=this.state.width,t.height=this.state.height,this.setState({canvas:t,ctx:a},function(){e.state.ctx.fillStyle="lightgray",e.state.ctx.fillRect(20,20,e.state.canvas.width,e.state.canvas.height)}),setInterval(this.intervalCanvasDraw,4e3);fetch("https://pictionaries.herokuapp.com/canvas/1",{method:"PATCH",headers:y,body:JSON.stringify({prevX:1,isClear:"true"})}).then(function(e){return e.json()}).then(function(e){console.log("change currentGameId",e)})}},{key:"render",value:function(){var e=this;return this.props.isDrawing?n.a.createElement(r.Fragment,null,n.a.createElement("canvas",{ref:this.canvasRef,onMouseMove:function(t){return e.handleMouseMoves(t,"move")},onMouseDown:function(t){return e.handleMouseMoves(t,"down")},onMouseUp:function(t){return e.handleMouseMoves(t,"up")},onMouseOut:function(t){return e.handleMouseMoves(t,"out")}}),n.a.createElement("button",{onClick:this.handleClear},"ClearImage")):n.a.createElement(r.Fragment,null,n.a.createElement("canvas",{ref:this.canvasRef}))}}]),t}(n.a.Component),E=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(n)))).state={canvas:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://pictionaries.herokuapp.com/game").then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({canvas:t[0].name})})}},{key:"render",value:function(){return n.a.createElement(m.a,{basename:"/"},n.a.createElement("div",null,n.a.createElement("h2",null,"Pictionary Online"),n.a.createElement(m.b,{to:"/"},"Home"),n.a.createElement("hr",null),n.a.createElement(v.a,{exact:!0,path:"/",render:function(e){return n.a.createElement("div",null,n.a.createElement(d,null))}}),n.a.createElement(v.a,{path:"/draw",render:function(e){return n.a.createElement("div",null,n.a.createElement(g,{isDrawing:!0}),n.a.createElement(p,null))}}),n.a.createElement(v.a,{path:"/guess",render:function(e){return n.a.createElement("div",null,n.a.createElement(g,{isDrawing:!1}),n.a.createElement(f,null))}})))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.9faac5af.chunk.js.map