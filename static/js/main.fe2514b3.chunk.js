(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(37)},27:function(e,t,n){},28:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),s=n.n(c),o=(n(27),n(5)),i=n(6),u=n(8),l=n(7),h=n(9),d=n(11),p=n(10),v=(n(28),{"Content-Type":"application/json",Accept:"application/json"}),m=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).updateGuessList=function(){fetch("https://pictionaries.herokuapp.com/game/1").then(function(e){return e.json()}).then(function(t){e.setState({guessList:t.guesses}),t.is_won&&alert("We have a winner, thank you for playing.")})},e.handleReject=function(e){var t=e.target.value;fetch("https://pictionaries.herokuapp.com/game/1",{method:"PATCH",headers:v,body:JSON.stringify({guessText:t})})},e.handleWinner=function(){fetch("https://pictionaries.herokuapp.com/game/1",{method:"PATCH",headers:v,body:JSON.stringify({isReject:!0})})},e.state={guessList:[]},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){fetch("https://pictionaries.herokuapp.com/game/1",{method:"PATCH",headers:v,body:JSON.stringify({isClear:!0})}),setInterval(this.updateGuessList,3e3)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"canvas"},r.a.createElement("h2",null,"Guesses:"),r.a.createElement("ul",null,this.state.guessList.map(function(t,n){return r.a.createElement("li",{key:n},r.a.createElement("strong",null,t)," "," ",r.a.createElement("button",{onClick:e.handleWinner},"Accept")," ",r.a.createElement("button",{onClick:e.handleReject,value:t},"Reject"))})))}}]),t}(a.Component),f={"Content-Type":"application/json",Accept:"application/json"},y=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).updateRejectedList=function(){fetch("https://pictionaries.herokuapp.com/game/1").then(function(e){return e.json()}).then(function(t){e.setState({rejectedList:t.rejectList}),t.is_won&&alert("We have a winner, thank you for playing.")})},e.handleGuessForm=function(e){e.preventDefault(),console.log("ev.name",e.target.guess.value);var t=e.target.guess.value;fetch("https://pictionaries.herokuapp.com/game/1",{method:"PATCH",headers:f,body:JSON.stringify({guess:t})})},e.state={rejectedList:[]},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){setInterval(this.updateRejectedList,3e3)}},{key:"render",value:function(){return r.a.createElement("div",{className:"canvas"},r.a.createElement("div",{id:"sendGuessForm"},r.a.createElement("form",{onSubmit:this.handleGuessForm},r.a.createElement("label",null,r.a.createElement("strong",null,"Send Guess:"),r.a.createElement("input",{type:"text",name:"guess",required:!0})),r.a.createElement("input",{type:"submit",value:"Submit"}))),r.a.createElement("h3",null,"Wrong Answers:"),r.a.createElement("ul",{id:"rejectedGuessList"},this.state.rejectedList.map(function(e,t){return r.a.createElement("li",{key:t,style:{textDecoration:"line-through"}},r.a.createElement("strong",null,e))})))}}]),t}(a.Component),g=function(e){return r.a.createElement("div",{id:"playSelect"},r.a.createElement("div",{className:"homeCard"},r.a.createElement(d.b,{to:"/guess"},r.a.createElement("h4",null,"Play as a Guess Role"))),r.a.createElement("div",{className:"homeCard"},r.a.createElement(d.b,{to:"/draw"},r.a.createElement("h4",null,"Play as a Draw Role"))))},E={"Content-Type":"application/json",Accept:"application/json"},b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).intervalCanvasDraw=function(){fetch("https://pictionaries.herokuapp.com/canvas").then(function(e){return e.json()}).then(function(e){for(var t=0;t<e[0].currXArray.length;t++)n.state.ctx.beginPath(),n.state.ctx.moveTo(e[0].prevXArray[t],e[0].prevYArray[t]),n.state.ctx.lineTo(e[0].currXArray[t],e[0].currYArray[t]),n.state.ctx.strokeStyle=n.state.x,n.state.ctx.lineWidth=n.state.y,n.state.ctx.stroke(),n.state.ctx.closePath()})},n.handleMouseMoves=function(e,t){e.persist(),n.findxy(t,e)},n.sendDrawData=function(){var e={currentGameId:n.props.gameId,prevXArray:n.state.prevXArray,prevYArray:n.state.prevYArray,currXArray:n.state.currXArray,currYArray:n.state.currYArray};fetch("https://pictionaries.herokuapp.com/canvas/1",{method:"PATCH",headers:E,body:JSON.stringify(e)})},n.findxy=function(e,t){"down"==e?n.setState(function(e){return{prevX:e.currX,prevY:e.currY,currX:t.clientX-e.canvas.offsetLeft,currY:t.clientY-e.canvas.offsetTop,flag:!0,dot_flag:!0}},function(){n.state.dot_flag&&(n.state.ctx.beginPath(),n.state.ctx.fillStyle=n.state.x,n.state.ctx.fillRect(n.state.currX,n.state.currY,2,2),n.state.ctx.closePath(),n.setState({dot_flag:!1}))}):"up"==e?(n.setState({flag:!1}),n.sendDrawData()):"move"==e&&n.state.flag&&n.setState(function(e){return{prevX:e.currX,prevY:e.currY,currX:t.clientX-e.canvas.offsetLeft,currY:t.clientY-e.canvas.offsetTop}},function(){n.draw()})},n.draw=function(){n.state.ctx.beginPath(),n.state.ctx.moveTo(n.state.prevX,n.state.prevY),n.state.ctx.lineTo(n.state.currX,n.state.currY),n.state.ctx.strokeStyle=n.state.x,n.state.ctx.lineWidth=n.state.y,n.state.ctx.stroke(),n.state.ctx.closePath();var e=n.state.prevXArray.slice();e.push(n.state.prevX);var t=n.state.prevYArray.slice();t.push(n.state.prevY);var a=n.state.currXArray.slice();a.push(n.state.currX);var r=n.state.currYArray.slice();r.push(n.state.currY),n.setState({prevXArray:e,prevYArray:t,currXArray:a,currYArray:r})},n.handleClear=function(){fetch("https://pictionaries.herokuapp.com/canvas/1",{method:"PATCH",headers:E,body:JSON.stringify({prevX:1,isClear:"true"})}).then(function(e){return e.json()}).then(function(e){console.log("change currentGameId",e)}),setTimeout(window.location.reload(),2e3)},n.canvasRef=r.a.createRef(),n.state={canvas:!1,ctx:!1,drawingFlag:!1,prevX:0,currX:0,prevY:0,currY:0,prevXArray:[],prevYArray:[],currXArray:[],currYArray:[],dot_flag:!1,x:"black",y:2,width:370,height:400,emptyArray:[]},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.canvasRef.current,n=t.getContext("2d");t.width=this.state.width,t.height=this.state.height;function a(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}t.addEventListener("mousedown",function(e){!0,a(t,e)},!1),t.addEventListener("mouseup",function(e){!1},!1),t.addEventListener("mousemove",function(e){a(t,e)},!1),t.addEventListener("touchstart",function(e){(function(e,t){var n=e.getBoundingClientRect();return{x:t.touches[0].clientX-n.left,y:t.touches[0].clientY-n.top}})(t,e);var n=e.touches[0],a=new MouseEvent("mousedown",{clientX:n.clientX,clientY:n.clientY});t.dispatchEvent(a)},!1),t.addEventListener("touchend",function(e){var n=new MouseEvent("mouseup",{});t.dispatchEvent(n)},!1),t.addEventListener("touchmove",function(e){var n=e.touches[0],a=new MouseEvent("mousemove",{clientX:n.clientX,clientY:n.clientY});t.dispatchEvent(a)},!1),document.body.addEventListener("touchstart",function(e){e.target==t&&e.preventDefault()},!1),document.body.addEventListener("touchend",function(e){e.target==t&&e.preventDefault()},!1),document.body.addEventListener("touchmove",function(e){e.target==t&&e.preventDefault()},!1),this.setState({canvas:t,ctx:n},function(){e.state.ctx.fillStyle="lightgray",e.state.ctx.fillRect(20,20,e.state.canvas.width,e.state.canvas.height)}),setInterval(this.intervalCanvasDraw,2e3);fetch("https://pictionaries.herokuapp.com/canvas/1",{method:"PATCH",headers:E,body:JSON.stringify({prevX:1,isClear:"true"})}).then(function(e){return e.json()}).then(function(e){console.log("change currentGameId",e)})}},{key:"render",value:function(){var e=this;return this.props.isDrawing?r.a.createElement("div",{className:"canvas"},r.a.createElement("canvas",{ref:this.canvasRef,onMouseMove:function(t){return e.handleMouseMoves(t,"move")},onMouseDown:function(t){return e.handleMouseMoves(t,"down")},onMouseUp:function(t){return e.handleMouseMoves(t,"up")},onMouseOut:function(t){return e.handleMouseMoves(t,"out")}}),r.a.createElement("button",{onClick:this.handleClear},"Reset")):r.a.createElement("div",{className:"canvas"},r.a.createElement("canvas",{ref:this.canvasRef}))}}]),t}(r.a.Component),w=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.a,{basename:"/"},r.a.createElement(a.Fragment,null,r.a.createElement("div",{id:"navBar"},r.a.createElement("h1",null,"Pictionary Online"),r.a.createElement("h2",{id:"home"},r.a.createElement(d.b,{to:"/"},"Home")),r.a.createElement("hr",null)),r.a.createElement(p.a,{exact:!0,path:"/",render:function(e){return r.a.createElement("div",{id:"HomePage"},r.a.createElement(g,null))}}),r.a.createElement(p.a,{path:"/draw",render:function(e){return r.a.createElement("div",null,r.a.createElement(b,{isDrawing:!0}),r.a.createElement(m,null))}}),r.a.createElement(p.a,{path:"/guess",render:function(e){return r.a.createElement("div",null,r.a.createElement(b,{isDrawing:!1}),r.a.createElement(y,null))}}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.fe2514b3.chunk.js.map