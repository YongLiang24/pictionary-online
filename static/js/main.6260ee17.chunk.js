(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(37)},27:function(e,t,a){},28:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),o=(a(27),a(5)),i=a(6),u=a(8),l=a(7),h=a(9),p=a(11),m=a(10),d=(a(28),{"Content-Type":"application/json",Accept:"application/json"}),v=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).updateGuessList=function(){fetch("https://pictionaries.herokuapp.com/game/1").then(function(e){return e.json()}).then(function(t){e.setState({guessList:t.guesses}),t.is_won&&alert("We have a winner, thank you for playing.")})},e.handleReject=function(e){var t=e.target.value;fetch("https://pictionaries.herokuapp.com/game/1",{method:"PATCH",headers:d,body:JSON.stringify({guessText:t})})},e.handleWinner=function(){fetch("https://pictionaries.herokuapp.com/game/1",{method:"PATCH",headers:d,body:JSON.stringify({isReject:!0})})},e.state={guessList:[]},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){fetch("https://pictionaries.herokuapp.com/game/1",{method:"PATCH",headers:d,body:JSON.stringify({isClear:!0})}),setInterval(this.updateGuessList,3e3)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"canvas"},r.a.createElement("h2",null,"Guesses:"),r.a.createElement("ul",null,this.state.guessList.map(function(t,a){return r.a.createElement("li",{key:a},r.a.createElement("strong",null,t)," "," ",r.a.createElement("button",{onClick:e.handleWinner},"Accept")," ",r.a.createElement("button",{onClick:e.handleReject,value:t},"Reject"))})))}}]),t}(n.Component),f={"Content-Type":"application/json",Accept:"application/json"},y=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).updateRejectedList=function(){fetch("https://pictionaries.herokuapp.com/game/1").then(function(e){return e.json()}).then(function(t){e.setState({rejectedList:t.rejectList}),t.is_won&&alert("We have a winner, thank you for playing.")})},e.handleGuessForm=function(e){e.preventDefault(),console.log("ev.name",e.target.guess.value);var t=e.target.guess.value;fetch("https://pictionaries.herokuapp.com/game/1",{method:"PATCH",headers:f,body:JSON.stringify({guess:t})})},e.state={rejectedList:[]},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){setInterval(this.updateRejectedList,3e3)}},{key:"render",value:function(){return r.a.createElement("div",{className:"canvas"},r.a.createElement("div",{id:"sendGuessForm"},r.a.createElement("form",{onSubmit:this.handleGuessForm},r.a.createElement("label",null,r.a.createElement("strong",null,"Send Guess:"),r.a.createElement("input",{type:"text",name:"guess",required:!0})),r.a.createElement("input",{type:"submit",value:"Submit"}))),r.a.createElement("h3",null,"Wrong Answers:"),r.a.createElement("ul",{id:"rejectedGuessList"},this.state.rejectedList.map(function(e,t){return r.a.createElement("li",{key:t,style:{textDecoration:"line-through"}},r.a.createElement("strong",null,e))})))}}]),t}(n.Component),g=function(e){return r.a.createElement("div",{id:"playSelect"},r.a.createElement("div",{className:"homeCard"},r.a.createElement(p.b,{to:"/guess"},r.a.createElement("h4",null,"Play as a Guess Role"))),r.a.createElement("div",{className:"homeCard"},r.a.createElement(p.b,{to:"/draw"},r.a.createElement("h4",null,"Play as a Draw Role"))))},E={"Content-Type":"application/json",Accept:"application/json"},b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).intervalCanvasDraw=function(){fetch("https://pictionaries.herokuapp.com/canvas").then(function(e){return e.json()}).then(function(e){for(var t=0;t<e[0].currXArray.length;t++)a.state.ctx.beginPath(),a.state.ctx.moveTo(e[0].prevXArray[t],e[0].prevYArray[t]),a.state.ctx.lineTo(e[0].currXArray[t],e[0].currYArray[t]),a.state.ctx.strokeStyle=a.state.x,a.state.ctx.lineWidth=a.state.y,a.state.ctx.stroke(),a.state.ctx.closePath()})},a.handleMouseMoves=function(e,t){e.preventDefault(),e.persist(),a.findxy(t,e)},a.sendDrawData=function(){var e={currentGameId:a.props.gameId,prevXArray:a.state.prevXArray,prevYArray:a.state.prevYArray,currXArray:a.state.currXArray,currYArray:a.state.currYArray};fetch("https://pictionaries.herokuapp.com/canvas/1",{method:"PATCH",headers:E,body:JSON.stringify(e)})},a.findxy=function(e,t){"down"==e?a.setState(function(e){return{prevX:e.currX,prevY:e.currY,currX:t.clientX-e.canvas.offsetLeft,currY:t.clientY-e.canvas.offsetTop,flag:!0,dot_flag:!0}},function(){a.state.dot_flag&&(a.state.ctx.beginPath(),a.state.ctx.fillStyle=a.state.x,a.state.ctx.fillRect(a.state.currX,a.state.currY,2,2),a.state.ctx.closePath(),a.setState({dot_flag:!1}))}):"up"==e?(a.setState({flag:!1}),a.sendDrawData()):"move"==e&&a.state.flag&&a.setState(function(e){return{prevX:e.currX,prevY:e.currY,currX:t.clientX-e.canvas.offsetLeft,currY:t.clientY-e.canvas.offsetTop}},function(){a.draw()})},a.draw=function(){a.state.ctx.beginPath(),a.state.ctx.moveTo(a.state.prevX,a.state.prevY),a.state.ctx.lineTo(a.state.currX,a.state.currY),a.state.ctx.strokeStyle=a.state.x,a.state.ctx.lineWidth=a.state.y,a.state.ctx.stroke(),a.state.ctx.closePath();var e=a.state.prevXArray.slice();e.push(a.state.prevX);var t=a.state.prevYArray.slice();t.push(a.state.prevY);var n=a.state.currXArray.slice();n.push(a.state.currX);var r=a.state.currYArray.slice();r.push(a.state.currY),a.setState({prevXArray:e,prevYArray:t,currXArray:n,currYArray:r})},a.handleClear=function(){fetch("https://pictionaries.herokuapp.com/canvas/1",{method:"PATCH",headers:E,body:JSON.stringify({prevX:1,isClear:"true"})}).then(function(e){return e.json()}).then(function(e){console.log("change currentGameId",e)}),setTimeout(window.location.reload(),2e3)},a.canvasRef=r.a.createRef(),a.state={canvas:!1,ctx:!1,drawingFlag:!1,prevX:0,currX:0,prevY:0,currY:0,prevXArray:[],prevYArray:[],currXArray:[],currYArray:[],dot_flag:!1,x:"black",y:2,width:350,height:350,emptyArray:[]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.canvasRef.current,a=t.getContext("2d");t.width=this.state.width,t.height=this.state.height,this.setState({canvas:t,ctx:a},function(){e.state.ctx.fillStyle="lightgray",e.state.ctx.fillRect(20,20,e.state.canvas.width,e.state.canvas.height)}),setInterval(this.intervalCanvasDraw,2e3);fetch("https://pictionaries.herokuapp.com/canvas/1",{method:"PATCH",headers:E,body:JSON.stringify({prevX:1,isClear:"true"})}).then(function(e){return e.json()}).then(function(e){console.log("change currentGameId",e)})}},{key:"render",value:function(){var e=this;return this.props.isDrawing?r.a.createElement("div",{className:"canvas"},r.a.createElement("canvas",{ref:this.canvasRef,onMouseMove:function(t){return e.handleMouseMoves(t,"move")},onMouseDown:function(t){return e.handleMouseMoves(t,"down")},onMouseUp:function(t){return e.handleMouseMoves(t,"up")},onMouseOut:function(t){return e.handleMouseMoves(t,"out")}}),r.a.createElement("button",{onClick:this.handleClear},"Reset")):r.a.createElement("div",{className:"canvas"},r.a.createElement("canvas",{ref:this.canvasRef,ontouchstart:function(t){return e.handleMouseMoves(t,"down")},ontouchmove:function(t){return e.handleMouseMoves(t,"move")},ontouchend:function(t){return e.handleMouseMoves(t,"up")}}))}}]),t}(r.a.Component),j=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.a,{basename:"/"},r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:"navBar"},r.a.createElement("h1",null,"Pictionary Online"),r.a.createElement("h2",{id:"home"},r.a.createElement(p.b,{to:"/"},"Home")),r.a.createElement("hr",null)),r.a.createElement(m.a,{exact:!0,path:"/",render:function(e){return r.a.createElement("div",{id:"HomePage"},r.a.createElement(g,null))}}),r.a.createElement(m.a,{path:"/draw",render:function(e){return r.a.createElement("div",null,r.a.createElement(b,{isDrawing:!0}),r.a.createElement(v,null))}}),r.a.createElement(m.a,{path:"/guess",render:function(e){return r.a.createElement("div",null,r.a.createElement(b,{isDrawing:!1}),r.a.createElement(y,null))}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.6260ee17.chunk.js.map